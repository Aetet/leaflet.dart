<!DOCTYPE html>
<html>
<head>
  <title>Leaflet Bounds Extend</title>

  <link rel="stylesheet" href="packages/leaflet/leaflet.css">
  <link rel="stylesheet" href="../css/screen.css" />
</head>
<body>
  <div id="map" style="width: 800px; height: 600px; border: 1px solid #ccc"></div>
  <button onclick="boundsExtendBounds();">Extend the bounds of the center rectangle with the upper right rectangle</button>
  <button onclick="boundsExtendLatLng()">Extend the bounds of the center rectangle with the lower left marker</button>

  <script src="route.js"></script>

  <script async type="application/dart">
    import 'package:leaflet/leaflet.dart';
    import '../utils.dart';

    main() {
      var latLng = new LatLng(54.18815548107151, -7.657470703124999);

      var bounds1 = new LatLngBounds.between(new LatLng(54.559322, -5.767822), new LatLng(56.1210604, -3.021240));
      var bounds2 = new LatLngBounds.between(new LatLng(56.56023925701561, -2.076416015625), new LatLng(57.01158038001565, -0.9777832031250001));
      LatLngBounds bounds3;

      var map = new LeafletMap.query('#map', new MapOptions()
        ..layers = [osmTileLayer]
        ..center = bounds1.getCenter()
        ..zoom = 7);

      var rectangle1 = new Rectangle(bounds1);
      var rectangle2 = new Rectangle(bounds2);
      Rectangle rectangle3;

      var marker = new Marker(latLng);

      map
        ..addLayer(rectangle1)
        ..addLayer(rectangle2)
        ..addLayer(marker);


      boundsExtendBounds() {
        if (rectangle3 != null) {
          map.removeLayer(rectangle3);
          rectangle3 = null;
        }
        if (bounds3 != null) {
          bounds3 = null;
        }
        bounds3 = new LatLngBounds.between(bounds1.getSouthWest(), bounds1.getNorthEast());
        bounds3.extend(bounds2);
        rectangle3 = new Rectangle(bounds3, new PolygonOptions()
          ..color = "#ff0000"
          ..weight = 1
          ..opacity = 1
          ..fillOpacity = 0);

        map.addLayer(rectangle3);
      }

      boundsExtendLatLng() {
        if (rectangle3 != null) {
          map.removeLayer(rectangle3);
          rectangle3 = null;
        }
        if (bounds3 != null) {
          bounds3 = null;
        }
        bounds3 = new LatLngBounds.between(bounds1.getSouthWest(), bounds1.getNorthEast());
        bounds3.extend(marker.getLatLng());
        rectangle3 = new Rectangle(bounds3, new PolygonOptions()
          ..color = "#ff0000"
          ..weight = 1
          ..opacity = 1
          ..fillOpacity = 0);

        map.addLayer(rectangle3);
      }
    }
        </script>
</body>
</html>
