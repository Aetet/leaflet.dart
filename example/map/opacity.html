<!DOCTYPE html>
<html>
<head>
  <title>Leaflet debug page</title>

  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="packages/leaflet/leaflet.css">
  <link rel="stylesheet" href="../css/screen.css" />
  <style>
    .mapcontainer {
      float:left;
      position: relative;
      width: 32%;
      font-size: 12px;
      font-family: sans-serif;
      height: 340px;
      margin-bottom: 15px;
      background-color: #eee;
      margin-right: 1%;
    }

    .map {
      position: absolute;
      width: 100%;
      height: 280px;
      bottom: 0px;
    }
  </style>
</head>
<body>
  <p>These should all render identically.</p>
  <div class="mapcontainer">
    CASE 1: no opacity set on any layers
    <br/>
    <div id="map1" class="map"></div>
  </div>
  <div class="mapcontainer">
    CASE 2: opacity set to .99 on overlays but not on basemap
    <br/>
    <div id="map2" class="map"></div>
  </div>
  <div class="mapcontainer">
    CASE 3: opacity set on overlays but not on basemap, zIndex option set to 0 on basemap
    <br/>
    <div id="map3" class="map"></div>
  </div>
  <div class="mapcontainer">
    CASE 4: opacity set to .99 on overlays but set to 1 on basemap
    <br/>
    <div id="map4" class="map"></div>
  </div>
  <div class="mapcontainer">
    CASE 5: opacity set to .99 on all layers
    <br/>
    <div id="map5" class="map"></div>
  </div>
  <div class="mapcontainer">
    CASE 6: opacity set to .99 on 1st and 3rd layers and 1 on middle layer
    <br/>
    <div id="map6" class="map"></div>
  </div>

  <script async type="application/dart">
    import 'package:leaflet/leaflet.dart';

    const eezsTileUrl = 'http://tile{s}.mpatlas.org/tilecache/eezs/{z}/{x}/{y}.png';
    const mpasTileUrl = 'http://tile{s}.mpatlas.org/tilecache/mpas/{z}/{x}/{y}.png';
    const mpaSubdomains = const List.generate(8, (i) => '${i+1}');

    main() {
      var mapopts = new MapOptions()
        ..center = new LatLng(35, -122)
        ..zoom = 5;

      var map1 = new LeafletMap.query('#map1', mapopts);
      var map2 = new LeafletMap.query('#map2', mapopts);
      var map3 = new LeafletMap.query('#map3', mapopts);
      var map4 = new LeafletMap.query('#map4', mapopts);
      var map5 = new LeafletMap.query('#map5', mapopts);
      var map6 = new LeafletMap.query('#map6', mapopts);

      ///  CASE 1: no opacity set on any layers
      // OSM Basemap
      var osm1 = new TileLayer(osmTileUrl)
        ..addTo(map1);

      // EEZs / Nations
      var eez1 = new TileLayer(eezsTileUrl, new TileLayerOptions()
          ..subdomains = mpaSubdomains
          ..tms = true)
        ..addTo(map1);

      // Marine Protected Areas overlay
      var mpa1 = new TileLayer(mpasTileUrl, new TileLayerOptions()
          ..subdomains = mpaSubdomains
          ..tms = false)
        ..addTo(map1);


      /// CASE 2: opacity set on overlays but not on basemap
      // OSM Basemap
      var osm2 = new TileLayer(osmTileUrl)
        ..addTo(map2);

      // EEZs / Nations
      var eez2 = new TileLayer(eezsTileUrl, new TileLayerOptions()
          ..subdomains = mpaSubdomains
          ..tms = true
          ..opacity = 0.99)
        ..addTo(map2);

      // Marine Protected Areas overlay
      var mpa2 = new TileLayer(mpasTileUrl, new TileLayerOptions()
          ..subdomains = mpaSubdomains
          ..tms = false
          ..opacity = 0.99)
        ..addTo(map2);


      /// CASE 3: opacity set on overlays but not on basemap, zIndex option set to 0 on basemap
      // OSM Basemap
      var osm3 = new TileLayer(osmTileUrl, new TileLayerOptions()
          ..zIndex = 0)
        ..addTo(map3);

      // EEZs / Nations
      var eez3 = new TileLayer(eezsTileUrl, new TileLayerOptions()
          ..subdomains = mpaSubdomains
          ..tms = true
          ..opacity = 0.99)
        ..addTo(map3);

      // Marine Protected Areas overlay
      var mpa3 = new TileLayer(mpasTileUrl, new TileLayerOptions()
          ..subdomains = mpaSubdomains
          ..tms = false
          ..opacity = 0.99)
        ..addTo(map3);


      /// CASE 4: opacity set on overlays but set to 1 on basemap
      // OSM Basemap
      var osm4 = new TileLayer(osmTileUrl, new TileLayerOptions()
          ..opacity = 1)
        ..addTo(map4);

      // EEZs / Nations
      var eez4 = new TileLayer(eezsTileUrl, new TileLayerOptions()
          ..subdomains = mpaSubdomains
          ..tms = true
          ..opacity = 0.99)
        ..addTo(map4);

      // Marine Protected Areas overlay
      var mpa4 = new TileLayer(mpasTileUrl, new TileLayerOptions()
          ..subdomains = mpaSubdomains
          ..tms = false
          ..opacity = 0.99)
        ..addTo(map4);


      /// CASE 5: opacity set to .5 on all layers
      // OSM Basemap
      var osm5 = new TileLayer(osmTileUrl, new TileLayerOptions()
          ..opacity = 0.99)
        ..addTo(map5);

      // EEZs / Nations
      var eez5 = new TileLayer(eezsTileUrl, new TileLayerOptions()
          ..subdomains = mpaSubdomains
          ..tms = true
          ..opacity = 0.99)
        ..addTo(map5);

      // Marine Protected Areas overlay
      var mpa5 = new TileLayer(mpasTileUrl, new TileLayerOptions()
          ..subdomains = mpaSubdomains
          ..tms = false
          ..opacity = 0.99
      )..addTo(map5);


      /// CASE 6: opacity set to .5 on 1st and 3rd layers and 1 on middle layer
      // OSM Basemap
      var osm6 = new TileLayer(osmTileUrl, new TileLayerOptions()
          ..opacity = 0.99)
        ..addTo(map6);

      // EEZs / Nations
      var eez6 = new TileLayer(eezsTileUrl, new TileLayerOptions()
          ..subdomains = mpaSubdomains
          ..tms = true
          ..opacity = 1)
        ..addTo(map6);

      // Marine Protected Areas overlay
      var mpa6 = new TileLayer(mpasTileUrl, new TileLayerOptions()
          ..subdomains = mpaSubdomains
          ..tms = false
          ..opacity = 0.99)
        ..addTo(map6);
    }
  </script>
</body>
</html>
